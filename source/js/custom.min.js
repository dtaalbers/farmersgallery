jQuery(document).ready(function(t){function e(e){$preloader.fadeOut("fast"),e.removeAttr("width").removeAttr("height").css({width:"",height:""}),$bg.data("originalImageWidth",e.width()).data("originalImageHeight",e.height()),$bg.data("newTitle")&&e.attr("title",$bg.data("newTitle")),i(e),$bg.data("nextImage",t(t("#outer_container").data("selectedThumb")).next().attr("href")),"undefined"!=typeof itemIndex&&itemIndex==lastItemIndex?($bg.data("lastImageReached","Y"),$bg.data("nextImage",t("#outer_container a.thumb_link").first().attr("href"))):$bg.data("lastImageReached","N"),e.fadeIn("slow"),($bg.data("nextImage")||"Y"==$bg.data("lastImageReached"))&&o("close"),a()}function a(){$bg.data("nextImage")&&$nextimage_tip.stop().css("right",20).fadeIn("fast").fadeOut(2e3,"easeInExpo",function(){$nextimage_tip.css("right",t(window).width())})}function o(e){var a=900,o="easeInOutExpo";"open"==e?(t("#arrow_indicator").fadeTo("fast",0),t("#outer_container").stop().animate({left:0},a,o),$bg.stop().animate({left:585},a,o)):(t("#outer_container").stop().animate({left:-590},a,o),$bg.stop().animate({left:0},a,o,function(){t("#arrow_indicator").fadeTo("fast",1)}))}function i(e){var a=t(window).width(),o=t(window).height(),i=t(e).width(),r=t(e).height();if("original"!=$toolbar.data("imageViewMode")){t(e).removeClass("with_border").removeClass("with_shadow");var n=r/i,g=i/r;"fit"!=$toolbar.data("imageViewMode")?n>o/a?t(e).css("width",a).css("height",n*a):t(e).css("height",o).css("width",g*o):o/a>n?t(e).css("width",a).css("height",n*a):t(e).css("height",o).css("width",g*o),t(e).css("margin-left",(a-t(e).width())/2).css("margin-top",(o-t(e).height())/2)}else t(e).addClass("with_border").addClass("with_shadow"),t(e).css("width",$bg.data("originalImageWidth")).css("height",$bg.data("originalImageHeight")),t(e).css("margin-left",(a-t(e).outerWidth())/2).css("margin-top",(o-t(e).outerHeight())/2)}function r(t){$toolbar.data("imageViewMode",t),i($bgimg),$toolbar.html("full"==t?"<span class='lightgrey'>IMAGE VIEW MODE &rsaquo;</span> FULL":"fit"==t?"<span class='lightgrey'>IMAGE VIEW MODE &rsaquo;</span> FIT":"<span class='lightgrey'>IMAGE VIEW MODE &rsaquo;</span> ORIGINAL")}$defaultViewMode="full",$bg=t("#bg"),$bgimg=t("#bg #bgimg"),$preloader=t("#preloader"),$toolbar=t("#toolbar"),$nextimage_tip=t("#nextimage_tip"),t(window).load(function(){function a(){function e(){var t=(totalContent-visibleHeight/bottomSpace)/(draggerContainerHeight-draggerHeight),e=$dragger.position().top;targY=-e*t;var a=$customScrollBox_container.position().top-targY;$customScrollBox_container.stop().animate({top:"-="+a},animSpeed,easeType)}function a(){$dragger.css("background","url(round_custom_scrollbar_bg_over.png)")}function o(){$dragger.css("background","url(round_custom_scrollbar_bg.png)")}outerMargin=0,innerMargin=20,$customScrollBox.height(t(window).height()-outerMargin),$dragger_container.height(t(window).height()-innerMargin),visibleHeight=t(window).height()-outerMargin,$customScrollBox_container.height()>visibleHeight?($dragger.css("display","block"),totalContent=$customScrollBox_content.height(),draggerContainerHeight=t(window).height()-innerMargin,animSpeed=400,easeType="easeOutCirc",bottomSpace=1.05,targY=0,draggerHeight=$dragger.height(),$dragger.draggable({axis:"y",containment:"parent",drag:function(){e()},stop:function(){o()}}),$dragger_container.click(function(a){var o=a.pageY-t(this).offset().top,i=o+$dragger.height();draggerContainerHeight>i?($dragger.css("top",o),e()):($dragger.css("top",draggerContainerHeight-$dragger.height()),e())}),t(function(){$customScrollBox.bind("mousewheel",function(t,a){return vel=Math.abs(10*a),$dragger.css("top",$dragger.position().top-a*vel),e(),$dragger.position().top<0&&($dragger.css("top",0),$customScrollBox_container.stop(),e()),$dragger.position().top>draggerContainerHeight-$dragger.height()&&($dragger.css("top",draggerContainerHeight-$dragger.height()),$customScrollBox_container.stop(),e()),!1})}),$dragger.mouseup(function(){o()}).mousedown(function(){a()})):$dragger_container.css("display","none")}$toolbar.data("imageViewMode",$defaultViewMode),r($toolbar.data("imageViewMode")),$customScrollBox=t("#customScrollBox"),$customScrollBox_container=t("#customScrollBox .container"),$customScrollBox_content=t("#customScrollBox .content"),$dragger_container=t("#dragger_container"),$dragger=t("#dragger"),a(),t(window).resize(function(){i("#bgimg"),$dragger.css("top",0),$customScrollBox_container.css("top",0),$customScrollBox.unbind("mousewheel"),a()}),e($bgimg)}),$bgimg.load(function(){e(t(this))}),t("#outer_container").hover(function(){o("open")},function(){o("close")}),$bgimg.click(function(){var e=t(this);if($bg.data("nextImage")){e.css("display","none"),$preloader.fadeIn("fast"),t(t("#outer_container").data("selectedThumb")).children(".selected").css("display","none"),"Y"!=$bg.data("lastImageReached")?t(t("#outer_container").data("selectedThumb")).next().children(".selected").css("display","block"):t("#outer_container a.thumb_link").first().children(".selected").css("display","block");var a=t("#outer_container").data("selectedThumb");"Y"!=$bg.data("lastImageReached")?t("#outer_container").data("selectedThumb",t(a).next()):t("#outer_container").data("selectedThumb",t("#outer_container a.thumb_link").first()),$bg.data("newTitle",t(t("#outer_container").data("selectedThumb")).children("img").attr("title")),"Y"!=$bg.data("lastImageReached")?itemIndex++:itemIndex=0,e.attr("src","").attr("src",$bg.data("nextImage"))}}),$toolbar.hover(function(){t(this).stop().fadeTo("fast",1)},function(){t(this).stop().fadeTo("fast",.8)}),$toolbar.stop().fadeTo("fast",.8),$toolbar.click(function(){"full"==$toolbar.data("imageViewMode")?r("fit"):"fit"==$toolbar.data("imageViewMode")?r("original"):"original"==$toolbar.data("imageViewMode")&&r("full")});var n=["ajax-loader_dark.gif","round_custom_scrollbar_bg_over.png"];t.each(n,function(t){n[t]=new Image,n[t].src=this})});